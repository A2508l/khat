<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login</title>
    <!-- <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css"
        rel="stylesheet"> -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
    <script src="https://kit.fontawesome.com/eeed48d253.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v6.0.0/js/all.js"></script>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" /> -->

    <!-- firebase  -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-firestore.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-database.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-auth.js"></script>
    <!-- firebase-end  -->


    <!-- favicon  -->
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- favicon end  -->


    <style>
        #nav-bar-title {
            font-weight: bold;
            font-size: 2em;
            font-family: cursive;
            text-decoration: none;
        }

        .main {
            padding: 20px;
            font-family: 'Helvetica', serif;
            box-shadow: 5px 5px 7px 5px #888888;

        }

        .main h1 {
            font-size: 40px;
            text-align: center;
            font-family: 'Helvetica', serif;

        }

        /* input {
            font-family: 'Helvetica', serif;
            width: 100%;
            font-size: 20px;
            padding: 12px 20px;
            margin: 8px 0;
            border: none;
            border-bottom: 2px solid #767474;
        } */

        /* input[type=submit] {
                font-family: 'Helvetica', serif;
                width: 100%;
                background-color: #767474;
                border: none;
                color: white;
                padding: 16px 32px;
                margin: 4px 2px;
                border-radius: 10px;
            } */

        #title {
            text-align: center;
            text-decoration: underline;
            font-weight: bold;
        }

        .field {
            margin-left: 25%;
            margin-right: 25%;
        }

        @media only screen and (max-width: 600px) {
            .field {
                margin-left: 2%;
                margin-right: 2%;
            }
        }
    </style>
</head>

<body>
    <!-- navigation bar  -->
    <nav class="navbar" role="navigation" aria-label="main navigation" style="background-color:#c187eb23;">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">
                <!-- <h1 id="nav-bar-title">Mail-Box</h1> -->
                <img src="logo.svg" alt="A mailing for everyone">
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
                data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-end">
                <div class="navbar-item">
                    <a class="navbar-item" style="text-decoration: none;" href="/">
                        <strong>Home</strong>
                    </a>
                    <a class="navbar-item" style="text-decoration: none;" href="#about">
                        <strong>About</strong>
                    </a>
                    <div class="buttons">
                        <a class="button is-primary" style="text-decoration: none;" href="/signup">
                            <strong>Sign up</strong>
                        </a>
                        <a class="button is-light" style="text-decoration: none;" href="/login">
                            <strong>Log in</strong>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>


    <!-- login form  -->
    <h1 class="title is-1" id="title">Login</h1>
    <br>
    <!-- <form action="/loginSubmit" method="get">     -->
    <div class="field">
        <p class="control has-icons-left">
            <input class="input is-rounded is-success" type="text" name="email" id="email" placeholder="Email" required>
            <span class="icon is-small is-left">
                <!-- <i class="far fa-user"></i> -->
                <i class="fas fa-envelope"></i>
            </span>
        </p>
    </div>
    <br>
    <div class="field">
        <p class="control has-icons-left">
            <input class="input is-rounded is-danger" type="password" name="password" id="password"
                placeholder="Password" required>
            <span class="icon is-small is-left">
                <i class="fas fa-lock"></i>
            </span>
        </p>
        <br>
        <input type="checkbox" onclick="toggle()"> Show Password



    </div>
    <h1 class="subtitle is-5" style="text-align:center;">Don't have a account? <a href="/signup">Create one now</a>
    </h1>
    <!-- <button class="button is-large is-info is-light" type="submit" id="enterDetails" name="enterDetails"
            style="margin-left:45%;">Jump In</button> -->
    <button class="button is-large is-info is-light" type="submit" id="enterDetails" name="enterDetails"
        style="margin-left:45%;">Jump In</button>


    <!-- javascript file  -->
    <!-- for firebase  -->
    <!-- <script src="firebase.js"></script> -->
    <script>







        // for making the burger work when the size of screen decrease 
        document.addEventListener('DOMContentLoaded', () => {
            // Get all "navbar-burger" elements
            const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
            // Check if there are any navbar burgers
            if ($navbarBurgers.length > 0) {
                // Add a click event on each of them
                $navbarBurgers.forEach(el => {
                    el.addEventListener('click', () => {
                        // Get the target from the "data-target" attribute
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);
                        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');
                    });
                });
            }
        });

        // firebase 
        // firebase configuration 
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDIrbta5muvOPQwJW1pGiIJL4Wy5yNAFs4",
            authDomain: "mail-box-51a4a.firebaseapp.com",
            databaseURL: "https://mail-box-51a4a-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "mail-box-51a4a",
            storageBucket: "mail-box-51a4a.appspot.com",
            messagingSenderId: "29289685516",
            appId: "1:29289685516:web:932f6bfcb86b5bdb4bc429",
            measurementId: "G-0XTH145H1D"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        // firebase.analytics();

        // get the elements
        // buttons 
        // get the loging button 
        const login = document.getElementById("enterDetails");

        // get the details 
        // get the email 
        const email = document.getElementById("email");
        // get the password 
        const password = document.getElementById("password");

        // // creating login function 
        // login.addEventListener('click', e => {
        //     const em = email.value;
        //     const pass = password.value;

        //     const auth = firebase.auth();

        //     // console.log('Inside working');

        //     // signin in firebase 
        //     auth.signInWithEmailAndPassword(em, pass).then(user => {
        //         // if the user detail is correct 
        //         window.location = ('delete.html');
        //         // console.log("lol");
        //         // return res.redirect('after-login.html')
        //     }).catch(err => {
        //         // if user detail is not correct 
        //         console.log(err.message);
        //         alert(err.message);
        //     });
        // });
        login.addEventListener('click', e => {
            const em = email.value;
            const pass = password.value;

            const auth = firebase.auth();

            //sign in with firebase auth
            auth.signInWithEmailAndPassword(em, pass).then(user => {
                // alert("Login Successful :)");
                window.location = ('after-login.html');
            }).catch(err => {
                alert(err.message);
            });

        });

        // toggle password visibility 
        function toggle() {
            var x = document.getElementById("password");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }

        // password 
        $(function () {
            "use strict";

            function uncheckBox() {
                var isChecked = $("#cbox").prop("checked");
                if (isChecked) {
                    $("#cbox").prop("checked", false);
                    var x = document.getElementById("password");
                    if (x.type === "password") {
                        x.type = "text";
                    } else {
                        x.type = "password";
                    }
                }
            }

            $("body").on("click", function () {
                uncheckBox();
            });

            $("#cbox,label").on("click", function (e) {
                e.stopPropagation();
            });
            
             function preventBack() {
            window.history.forward();
        }
        setTimeout("preventBack()", 0);
        window.onunload = function () {
            null
        };
        });
    </script>
</body>
